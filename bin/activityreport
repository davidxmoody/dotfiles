#!/bin/bash

cd ~/.dbox/Dropbox/diary-data/tracking/
for file in activity-*.txt; do
  date=${file:9:10}
  num_lines=$(wc -l < "$file")
  hours=$((num_lines/60))
  minutes=$((num_lines%60))
  num_bars=$((num_lines/30))
  
  bar=$(printf "%${num_bars}s" '#')
  bar=${bar// /\#}
  printf '%s: [%-24s] %02dh %02dm\n' "$date" "$bar" "$hours" "$minutes"
done
