#!/usr/bin/env bash

sed "
  s%^/$%ROOT%;
  s%^$HOME$%HOME%;
  s%^$P_DIR/\\([^/]\\+\\)\\(/\\)\\?.*$%\\U\\1\\2%;
  s%^$HOME%~%;
  s%^\\(~\\)\\?/\\([^/]\\+\\)\\(/[^/]\\+\\)\\(/\\)\\?.*$%\\1/\\2\\3\\4%;
" <<< "${1:-$PWD}"
