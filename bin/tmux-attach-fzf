#!/usr/bin/env bash

set -e

available_sessions=$(tmux ls)
if [[ $(wc -l <<< "$available_sessions") == 0 ]]; then
  echo "No tmux sessions available" >&2
  exit 1
fi

selected_session=$(fzf --select-1 --exit-0 <<< "$available_sessions" | sed "s/:.*//")
if [[ -z "$selected_session" ]]; then
  echo "No tmux sessions available" >&2
  exit 1
fi

tmux attach -t "$selected_session"
