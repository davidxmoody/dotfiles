#!/usr/bin/env bash

set -e

[[ ! -d "$DIARY_DIR" ]] && echo "DIARY_DIR does not exist" >&2 && exit 1

cd "$DIARY_DIR"

last_year=$(ls -r "new-entries" | head -n1)
last_month=$(ls -r "new-entries/$last_year" | head -n1)
last_day=$(ls -r "new-entries/$last_year/$last_month" | head -n1)
last_entry=$(ls -r "new-entries/$last_year/$last_month/$last_day" | head -n1)

nvim "new-entries/$last_year/$last_month/$last_day/$last_entry"
